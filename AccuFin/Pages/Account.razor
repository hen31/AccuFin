@page "/account"

<EditModelComponent ModelType="CurrentUserModel" Model="Model" OnSaveValidModel="OnSave">
    <MudTextField Label="Naam"
                  @bind-Value="Model.Name" For="@(() => Model.Name)" />
    <MudTextField Label="Telefoon" Class="mt-3"
                  @bind-Value="Model.Telephone" For="@(() =>Model.Telephone)" />
    <MudTextField Label="Mobiel" Class="mt-3"
                  @bind-Value="Model.MobileNumber" For="@(() =>Model.MobileNumber)" />
</EditModelComponent>


@code {

    [Inject]
    public UserClient UserClient { get; set; }

    public CurrentUserModel Model { get; set; }

    public MudForm Form { get; set; }
    protected override async Task OnInitializedAsync()
    {
        Model = (await UserClient.GetCurrentUserAsync()).Data;
    }

    private async Task<Response<CurrentUserModel, List<ValidationError>>> OnSave(CurrentUserModel model)
    {
        return await UserClient.UpdateCurrentUserAsync(model);
    }
}
